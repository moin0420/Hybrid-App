{"ast":null,"code":"import _objectSpread from\"C:/Users/GulamK/hybrid-app-new/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// frontend/src/components/Table.jsx\nimport React,{useState,useEffect,forwardRef,useImperativeHandle,useRef}from\"react\";import axios from\"axios\";import io from\"socket.io-client\";import\"./Table.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io(window.location.origin);const Table=/*#__PURE__*/forwardRef((props,ref)=>{const[rows,setRows]=useState([]);const[editing,setEditing]=useState({});const[currentUser,setCurrentUser]=useState(\"\");const[editingStatus,setEditingStatus]=useState({});const[sortConfig,setSortConfig]=useState({});const[filters,setFilters]=useState({});const[currentPage,setCurrentPage]=useState(1);const rowsPerPage=20;// Column widths & refs (for resizing)\nconst[colWidths,setColWidths]=useState({});const thRefs=useRef({});// === Init username ===\nuseEffect(()=>{let user=localStorage.getItem(\"recruiterName\");if(!user){user=prompt(\"Enter your name:\");if(user)localStorage.setItem(\"recruiterName\",user);}setCurrentUser(user||\"Anonymous\");},[]);// === Fetch rows ===\nconst fetchRows=async()=>{try{const res=await axios.get(\"/api/requisitions\");setRows(res.data||[]);}catch(err){console.error(\"Error fetching requisitions:\",err);}};useImperativeHandle(ref,()=>({fetchRows}));useEffect(()=>{fetchRows();socket.on(\"requisitions_updated\",fetchRows);socket.on(\"editing_status\",data=>{// data = { requirementid, field, user }\nsetEditingStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[data.requirementid]:data.user?{user:data.user,field:data.field}:null}));});return()=>{socket.off(\"requisitions_updated\");socket.off(\"editing_status\");};// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);const columns=[\"requirementid\",\"title\",\"client\",\"slots\",\"status\",\"assigned_recruiters\",\"working\"];const isNonWorkable=row=>row.status!==\"Open\"||row.slots===0;// === Editing local state ===\nconst handleEdit=(reqId,field,value)=>{setEditing(prev=>_objectSpread(_objectSpread({},prev),{},{[reqId]:_objectSpread(_objectSpread({},prev[reqId]),{},{[field]:value})}));};// Save: send patched fields to backend\nconst handleSave=async reqId=>{const updatedFields=editing[reqId];if(!updatedFields)return;try{await axios.put(\"/api/requisitions/\".concat(reqId),updatedFields);socket.emit(\"requisitions_updated\");// clear editing cache for that row\nsetEditing(prev=>{const copy=_objectSpread({},prev);delete copy[reqId];return copy;});}catch(err){var _err$response,_err$response$data;// show single alert and refresh rows to revert UI to server state\nconst msg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Error saving changes\";alert(msg);await fetchRows();setEditing(prev=>{const copy=_objectSpread({},prev);delete copy[reqId];return copy;});}};// === Toggle working checkbox ===\nconst toggleWorking=async row=>{if(!row.requirementid)return;const assignedUsers=row.assigned_recruiters||[];const isAssigned=assignedUsers.includes(currentUser);// one active row per user\nconst alreadyWorking=rows.find(r=>(r.assigned_recruiters||[]).includes(currentUser)&&r.requirementid!==row.requirementid);if(!isAssigned&&alreadyWorking){alert(\"You are already working on another requirement. Please uncheck it first.\");return;}// max two users\nif(!isAssigned&&assignedUsers.length>=2){alert(\"Two recruiters are already working on this requirement.\");return;}const newAssigned=isAssigned?assignedUsers.filter(u=>u!==currentUser):[...assignedUsers,currentUser];const newWorkingTimes=_objectSpread({},row.working_times||{});if(isAssigned)delete newWorkingTimes[currentUser];else newWorkingTimes[currentUser]=new Date();try{await axios.put(\"/api/requisitions/\".concat(row.requirementid),{assigned_recruiters:newAssigned,working_times:newWorkingTimes});socket.emit(\"requisitions_updated\");fetchRows();}catch(err){var _err$response2,_err$response2$data;alert(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Error updating working status\");}};const disableCheckbox=row=>{const assignedUsers=row.assigned_recruiters||[];const nonWorkable=isNonWorkable(row);const userWorkingElsewhere=rows.some(r=>(r.assigned_recruiters||[]).includes(currentUser)&&r.requirementid!==row.requirementid);return nonWorkable||!assignedUsers.includes(currentUser)&&(assignedUsers.length>=2||userWorkingElsewhere);};// === Sorting & filtering ===\nconst handleSort=field=>{let direction=\"ascending\";if(sortConfig.field===field&&sortConfig.direction===\"ascending\"){direction=\"descending\";}setSortConfig({field,direction});};const handleFilter=(field,value)=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:value}));setCurrentPage(1);};const filteredRows=rows.filter(row=>Object.keys(filters).every(field=>{var _filters$field,_row$field;const filterValue=(_filters$field=filters[field])===null||_filters$field===void 0?void 0:_filters$field.toLowerCase();if(!filterValue)return true;if(field===\"assigned_recruiters\"){return(row[field]||[]).some(u=>u.toLowerCase().includes(filterValue));}return String((_row$field=row[field])!==null&&_row$field!==void 0?_row$field:\"\").toLowerCase().includes(filterValue);}));const sortedRows=[...filteredRows].sort((a,b)=>{if(!sortConfig.field)return 0;// for arrays (assigned_recruiters) compare joined string\nconst getVal=(obj,f)=>{var _obj$f;return Array.isArray(obj[f])?(obj[f]||[]).join(\", \"):(_obj$f=obj[f])!==null&&_obj$f!==void 0?_obj$f:\"\";};const valA=String(getVal(a,sortConfig.field)).toLowerCase();const valB=String(getVal(b,sortConfig.field)).toLowerCase();if(valA<valB)return sortConfig.direction===\"ascending\"?-1:1;if(valA>valB)return sortConfig.direction===\"ascending\"?1:-1;return 0;});// === Pagination ===\nconst totalPages=Math.ceil(sortedRows.length/rowsPerPage);const paginatedRows=sortedRows.slice((currentPage-1)*rowsPerPage,currentPage*rowsPerPage);// === Column resize handlers ===\nconst startResize=(e,col)=>{var _thRefs$current$col;e.preventDefault();const startX=e.clientX;const startWidth=((_thRefs$current$col=thRefs.current[col])===null||_thRefs$current$col===void 0?void 0:_thRefs$current$col.offsetWidth)||100;const doDrag=event=>{const newWidth=Math.max(40,startWidth+event.clientX-startX);setColWidths(prev=>_objectSpread(_objectSpread({},prev),{},{[col]:newWidth}));};const stopDrag=()=>{document.removeEventListener(\"mousemove\",doDrag);document.removeEventListener(\"mouseup\",stopDrag);};document.addEventListener(\"mousemove\",doDrag);document.addEventListener(\"mouseup\",stopDrag);};// Helper: revert a field immediately in the UI (without saving)\nconst revertFieldImmediate=(row,field)=>{// clear any local editing for that row->field to show server value\nsetEditing(prev=>{const copy=_objectSpread({},prev);if(!copy[row.requirementid])return copy;delete copy[row.requirementid][field];// if no other fields left, remove the object\nif(Object.keys(copy[row.requirementid]||{}).length===0)delete copy[row.requirementid];return copy;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-4\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-lg\",children:\"Requirements List\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filters-row-outer\",children:[columns.filter(c=>c!==\"working\").map(col=>{var _filters$col;return/*#__PURE__*/_jsx(\"div\",{className:\"filter-cell\",style:{width:colWidths[col]||undefined},children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Filter...\",className:\"filter-input\",value:(_filters$col=filters[col])!==null&&_filters$col!==void 0?_filters$col:\"\",onChange:e=>handleFilter(col,e.target.value)})},col);}),/*#__PURE__*/_jsx(\"div\",{className:\"filter-cell\",style:{width:colWidths.working||undefined}})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse border border-gray-400 text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-100 sticky-header\",children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map(col=>/*#__PURE__*/_jsxs(\"th\",{ref:el=>thRefs.current[col]=el,className:\"border p-1 cursor-pointer\",onClick:()=>handleSort(col),style:{width:colWidths[col]},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"th-content\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[col===\"requirementid\"&&\"Req ID\",col===\"title\"&&\"Job Title\",col===\"client\"&&\"Client\",col===\"slots\"&&\"Slots\",col===\"status\"&&\"Status\",col===\"assigned_recruiters\"&&\"Assigned Recruiter(s)\",col===\"working\"&&\"Working?\"]}),sortConfig.field===col&&/*#__PURE__*/_jsx(\"span\",{children:sortConfig.direction===\"ascending\"?\"▲\":\"▼\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"resize-handle\",onMouseDown:e=>startResize(e,col)})]},col))})}),/*#__PURE__*/_jsx(\"tbody\",{children:paginatedRows.map(row=>{var _ref,_editing$row$requirem,_editing$row$requirem2,_ref2,_editing$row$requirem3,_editing$row$requirem4,_ref3,_editing$row$requirem5,_editing$row$requirem6,_ref4,_editing$row$requirem7,_editing$row$requirem8,_ref5,_editing$row$requirem9,_editing$row$requirem0;const assignedUsers=row.assigned_recruiters||[];const nonWorkable=isNonWorkable(row);const editingUser=editingStatus[row.requirementid];// helper to get displayed value (local editing overrides server)\nconst displayVal=(r,field)=>{var _editing$r,_rows$find;return((_editing$r=editing[r])===null||_editing$r===void 0?void 0:_editing$r[field])!==undefined?editing[r][field]:(_rows$find=rows.find(x=>x.requirementid===row.requirementid))===null||_rows$find===void 0?void 0:_rows$find[field];};return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"border p-1 text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"w-full text-center border rounded\",value:(_ref=(_editing$row$requirem=(_editing$row$requirem2=editing[row.requirementid])===null||_editing$row$requirem2===void 0?void 0:_editing$row$requirem2.requirementid)!==null&&_editing$row$requirem!==void 0?_editing$row$requirem:row.requirementid)!==null&&_ref!==void 0?_ref:\"\",onFocus:()=>socket.emit(\"editing_status\",{requirementid:row.requirementid,field:\"requirementid\",user:currentUser}),onBlur:()=>{socket.emit(\"editing_status\",{requirementid:row.requirementid,field:\"requirementid\",user:null});handleSave(row.requirementid);},onChange:e=>handleEdit(row.requirementid,\"requirementid\",e.target.value)}),(editingUser===null||editingUser===void 0?void 0:editingUser.field)===\"requirementid\"&&(editingUser===null||editingUser===void 0?void 0:editingUser.user)!==currentUser&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-blue-600\",children:[editingUser.user,\" is editing...\"]})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border p-1\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full\",value:(_ref2=(_editing$row$requirem3=(_editing$row$requirem4=editing[row.requirementid])===null||_editing$row$requirem4===void 0?void 0:_editing$row$requirem4.title)!==null&&_editing$row$requirem3!==void 0?_editing$row$requirem3:row.title)!==null&&_ref2!==void 0?_ref2:\"\",onFocus:()=>socket.emit(\"editing_status\",{requirementid:row.requirementid,field:\"title\",user:currentUser}),onBlur:()=>{socket.emit(\"editing_status\",{requirementid:row.requirementid,field:\"title\",user:null});handleSave(row.requirementid);},onChange:e=>handleEdit(row.requirementid,\"title\",e.target.value)}),(editingUser===null||editingUser===void 0?void 0:editingUser.field)===\"title\"&&(editingUser===null||editingUser===void 0?void 0:editingUser.user)!==currentUser&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-blue-600\",children:[editingUser.user,\" is editing...\"]})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border p-1\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full\",value:(_ref3=(_editing$row$requirem5=(_editing$row$requirem6=editing[row.requirementid])===null||_editing$row$requirem6===void 0?void 0:_editing$row$requirem6.client)!==null&&_editing$row$requirem5!==void 0?_editing$row$requirem5:row.client)!==null&&_ref3!==void 0?_ref3:\"\",onFocus:()=>socket.emit(\"editing_status\",{requirementid:row.requirementid,field:\"client\",user:currentUser}),onBlur:()=>{socket.emit(\"editing_status\",{requirementid:row.requirementid,field:\"client\",user:null});handleSave(row.requirementid);},onChange:e=>handleEdit(row.requirementid,\"client\",e.target.value)}),(editingUser===null||editingUser===void 0?void 0:editingUser.field)===\"client\"&&(editingUser===null||editingUser===void 0?void 0:editingUser.user)!==currentUser&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-blue-600\",children:[editingUser.user,\" is editing...\"]})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border p-1 text-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:(_ref4=(_editing$row$requirem7=(_editing$row$requirem8=editing[row.requirementid])===null||_editing$row$requirem8===void 0?void 0:_editing$row$requirem8.slots)!==null&&_editing$row$requirem7!==void 0?_editing$row$requirem7:row.slots)!==null&&_ref4!==void 0?_ref4:0,onFocus:()=>socket.emit(\"editing_status\",{requirementid:row.requirementid,field:\"slots\",user:currentUser}),onBlur:()=>{socket.emit(\"editing_status\",{requirementid:row.requirementid,field:\"slots\",user:null});handleSave(row.requirementid);},onChange:e=>{// if this user is assigned -> block and revert immediately (no loops)\nif(assignedUsers.includes(currentUser)){// revert UI immediately to server value\nrevertFieldImmediate(row,\"slots\");// inform user once\nalert(\"Cannot change Slots while working on this requirement.\");return;}// also prevent negative values\nconst val=Number(e.target.value);handleEdit(row.requirementid,\"slots\",Number.isNaN(val)?0:val);},className:\"w-16 text-center\",style:{width:colWidths.slots||undefined}}),(editingUser===null||editingUser===void 0?void 0:editingUser.field)===\"slots\"&&(editingUser===null||editingUser===void 0?void 0:editingUser.user)!==currentUser&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-blue-600\",children:[editingUser.user,\" is editing...\"]})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"border p-1 text-center\",children:[/*#__PURE__*/_jsxs(\"select\",{value:(_ref5=(_editing$row$requirem9=(_editing$row$requirem0=editing[row.requirementid])===null||_editing$row$requirem0===void 0?void 0:_editing$row$requirem0.status)!==null&&_editing$row$requirem9!==void 0?_editing$row$requirem9:row.status)!==null&&_ref5!==void 0?_ref5:\"\",onFocus:()=>socket.emit(\"editing_status\",{requirementid:row.requirementid,field:\"status\",user:currentUser}),onBlur:()=>{socket.emit(\"editing_status\",{requirementid:row.requirementid,field:\"status\",user:null});handleSave(row.requirementid);},onChange:e=>{if(assignedUsers.includes(currentUser)){revertFieldImmediate(row,\"status\");alert(\"Cannot change Status while working on this requirement.\");return;}handleEdit(row.requirementid,\"status\",e.target.value);},className:\"border p-1\",style:{width:colWidths.status||undefined},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Open\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Closed\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Filled\"}),/*#__PURE__*/_jsx(\"option\",{children:\"On Hold\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Cancelled\"})]}),(editingUser===null||editingUser===void 0?void 0:editingUser.field)===\"status\"&&(editingUser===null||editingUser===void 0?void 0:editingUser.user)!==currentUser&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs text-blue-600\",children:[editingUser.user,\" is editing...\"]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"border p-1 text-center\",children:nonWorkable?\"Non-Workable\":assignedUsers.length?/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-start\",children:assignedUsers.map(user=>{var _row$working_times;const time=(_row$working_times=row.working_times)===null||_row$working_times===void 0?void 0:_row$working_times[user];const formattedTime=time?new Date(time).toLocaleTimeString([],{hour:\"2-digit\",minute:\"2-digit\"}):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 items-center text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:user===currentUser?\"font-semibold text-green-700\":\"\",children:user}),formattedTime&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[\"(\",formattedTime,\")\"]})]},user);})}):\"-\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border p-1 text-center\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:assignedUsers.includes(currentUser),onChange:()=>toggleWorking(row),disabled:disableCheckbox(row)})})]},row.requirementid);})})]})]}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center gap-2 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:currentPage===1,onClick:()=>setCurrentPage(p=>p-1),className:\"border px-2 py-1 rounded disabled:opacity-50\",children:\"Prev\"}),[...Array(totalPages)].map((_,i)=>/*#__PURE__*/_jsx(\"button\",{className:\"border px-2 py-1 rounded \".concat(currentPage===i+1?\"bg-gray-300\":\"\"),onClick:()=>setCurrentPage(i+1),children:i+1},i)),/*#__PURE__*/_jsx(\"button\",{disabled:currentPage===totalPages,onClick:()=>setCurrentPage(p=>p+1),className:\"border px-2 py-1 rounded disabled:opacity-50\",children:\"Next\"})]})]});});export default Table;","map":{"version":3,"names":["React","useState","useEffect","forwardRef","useImperativeHandle","useRef","axios","io","jsx","_jsx","jsxs","_jsxs","socket","window","location","origin","Table","props","ref","rows","setRows","editing","setEditing","currentUser","setCurrentUser","editingStatus","setEditingStatus","sortConfig","setSortConfig","filters","setFilters","currentPage","setCurrentPage","rowsPerPage","colWidths","setColWidths","thRefs","user","localStorage","getItem","prompt","setItem","fetchRows","res","get","data","err","console","error","on","prev","_objectSpread","requirementid","field","off","columns","isNonWorkable","row","status","slots","handleEdit","reqId","value","handleSave","updatedFields","put","concat","emit","copy","_err$response","_err$response$data","msg","response","message","alert","toggleWorking","assignedUsers","assigned_recruiters","isAssigned","includes","alreadyWorking","find","r","length","newAssigned","filter","u","newWorkingTimes","working_times","Date","_err$response2","_err$response2$data","disableCheckbox","nonWorkable","userWorkingElsewhere","some","handleSort","direction","handleFilter","filteredRows","Object","keys","every","_filters$field","_row$field","filterValue","toLowerCase","String","sortedRows","sort","a","b","getVal","obj","f","_obj$f","Array","isArray","join","valA","valB","totalPages","Math","ceil","paginatedRows","slice","startResize","e","col","_thRefs$current$col","preventDefault","startX","clientX","startWidth","current","offsetWidth","doDrag","event","newWidth","max","stopDrag","document","removeEventListener","addEventListener","revertFieldImmediate","className","children","c","map","_filters$col","style","width","undefined","placeholder","onChange","target","working","el","onClick","onMouseDown","_ref","_editing$row$requirem","_editing$row$requirem2","_ref2","_editing$row$requirem3","_editing$row$requirem4","_ref3","_editing$row$requirem5","_editing$row$requirem6","_ref4","_editing$row$requirem7","_editing$row$requirem8","_ref5","_editing$row$requirem9","_editing$row$requirem0","editingUser","displayVal","_editing$r","_rows$find","x","type","onFocus","onBlur","title","client","min","val","Number","isNaN","_row$working_times","time","formattedTime","toLocaleTimeString","hour","minute","checked","disabled","p","_","i"],"sources":["C:/Users/GulamK/hybrid-app-new/frontend/src/components/Table.jsx"],"sourcesContent":["// frontend/src/components/Table.jsx\r\nimport React, {\r\n  useState,\r\n  useEffect,\r\n  forwardRef,\r\n  useImperativeHandle,\r\n  useRef,\r\n} from \"react\";\r\nimport axios from \"axios\";\r\nimport io from \"socket.io-client\";\r\nimport \"./Table.css\";\r\n\r\nconst socket = io(window.location.origin);\r\n\r\nconst Table = forwardRef((props, ref) => {\r\n  const [rows, setRows] = useState([]);\r\n  const [editing, setEditing] = useState({});\r\n  const [currentUser, setCurrentUser] = useState(\"\");\r\n  const [editingStatus, setEditingStatus] = useState({});\r\n  const [sortConfig, setSortConfig] = useState({});\r\n  const [filters, setFilters] = useState({});\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const rowsPerPage = 20;\r\n\r\n  // Column widths & refs (for resizing)\r\n  const [colWidths, setColWidths] = useState({});\r\n  const thRefs = useRef({});\r\n\r\n  // === Init username ===\r\n  useEffect(() => {\r\n    let user = localStorage.getItem(\"recruiterName\");\r\n    if (!user) {\r\n      user = prompt(\"Enter your name:\");\r\n      if (user) localStorage.setItem(\"recruiterName\", user);\r\n    }\r\n    setCurrentUser(user || \"Anonymous\");\r\n  }, []);\r\n\r\n  // === Fetch rows ===\r\n  const fetchRows = async () => {\r\n    try {\r\n      const res = await axios.get(\"/api/requisitions\");\r\n      setRows(res.data || []);\r\n    } catch (err) {\r\n      console.error(\"Error fetching requisitions:\", err);\r\n    }\r\n  };\r\n\r\n  useImperativeHandle(ref, () => ({ fetchRows }));\r\n\r\n  useEffect(() => {\r\n    fetchRows();\r\n    socket.on(\"requisitions_updated\", fetchRows);\r\n    socket.on(\"editing_status\", (data) => {\r\n      // data = { requirementid, field, user }\r\n      setEditingStatus((prev) => ({\r\n        ...prev,\r\n        [data.requirementid]: data.user ? { user: data.user, field: data.field } : null,\r\n      }));\r\n    });\r\n    return () => {\r\n      socket.off(\"requisitions_updated\");\r\n      socket.off(\"editing_status\");\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const columns = [\r\n    \"requirementid\",\r\n    \"title\",\r\n    \"client\",\r\n    \"slots\",\r\n    \"status\",\r\n    \"assigned_recruiters\",\r\n    \"working\",\r\n  ];\r\n\r\n  const isNonWorkable = (row) => row.status !== \"Open\" || row.slots === 0;\r\n\r\n  // === Editing local state ===\r\n  const handleEdit = (reqId, field, value) => {\r\n    setEditing((prev) => ({\r\n      ...prev,\r\n      [reqId]: { ...prev[reqId], [field]: value },\r\n    }));\r\n  };\r\n\r\n  // Save: send patched fields to backend\r\n  const handleSave = async (reqId) => {\r\n    const updatedFields = editing[reqId];\r\n    if (!updatedFields) return;\r\n\r\n    try {\r\n      await axios.put(`/api/requisitions/${reqId}`, updatedFields);\r\n      socket.emit(\"requisitions_updated\");\r\n      // clear editing cache for that row\r\n      setEditing((prev) => {\r\n        const copy = { ...prev };\r\n        delete copy[reqId];\r\n        return copy;\r\n      });\r\n    } catch (err) {\r\n      // show single alert and refresh rows to revert UI to server state\r\n      const msg = err.response?.data?.message || \"Error saving changes\";\r\n      alert(msg);\r\n      await fetchRows();\r\n      setEditing((prev) => {\r\n        const copy = { ...prev };\r\n        delete copy[reqId];\r\n        return copy;\r\n      });\r\n    }\r\n  };\r\n\r\n  // === Toggle working checkbox ===\r\n  const toggleWorking = async (row) => {\r\n    if (!row.requirementid) return;\r\n\r\n    const assignedUsers = row.assigned_recruiters || [];\r\n    const isAssigned = assignedUsers.includes(currentUser);\r\n\r\n    // one active row per user\r\n    const alreadyWorking = rows.find(\r\n      (r) =>\r\n        (r.assigned_recruiters || []).includes(currentUser) &&\r\n        r.requirementid !== row.requirementid\r\n    );\r\n    if (!isAssigned && alreadyWorking) {\r\n      alert(\"You are already working on another requirement. Please uncheck it first.\");\r\n      return;\r\n    }\r\n\r\n    // max two users\r\n    if (!isAssigned && assignedUsers.length >= 2) {\r\n      alert(\"Two recruiters are already working on this requirement.\");\r\n      return;\r\n    }\r\n\r\n    const newAssigned = isAssigned\r\n      ? assignedUsers.filter((u) => u !== currentUser)\r\n      : [...assignedUsers, currentUser];\r\n\r\n    const newWorkingTimes = { ...(row.working_times || {}) };\r\n    if (isAssigned) delete newWorkingTimes[currentUser];\r\n    else newWorkingTimes[currentUser] = new Date();\r\n\r\n    try {\r\n      await axios.put(`/api/requisitions/${row.requirementid}`, {\r\n        assigned_recruiters: newAssigned,\r\n        working_times: newWorkingTimes,\r\n      });\r\n      socket.emit(\"requisitions_updated\");\r\n      fetchRows();\r\n    } catch (err) {\r\n      alert(err.response?.data?.message || \"Error updating working status\");\r\n    }\r\n  };\r\n\r\n  const disableCheckbox = (row) => {\r\n    const assignedUsers = row.assigned_recruiters || [];\r\n    const nonWorkable = isNonWorkable(row);\r\n    const userWorkingElsewhere = rows.some(\r\n      (r) =>\r\n        (r.assigned_recruiters || []).includes(currentUser) &&\r\n        r.requirementid !== row.requirementid\r\n    );\r\n    return (\r\n      nonWorkable ||\r\n      (!assignedUsers.includes(currentUser) &&\r\n        (assignedUsers.length >= 2 || userWorkingElsewhere))\r\n    );\r\n  };\r\n\r\n  // === Sorting & filtering ===\r\n  const handleSort = (field) => {\r\n    let direction = \"ascending\";\r\n    if (sortConfig.field === field && sortConfig.direction === \"ascending\") {\r\n      direction = \"descending\";\r\n    }\r\n    setSortConfig({ field, direction });\r\n  };\r\n\r\n  const handleFilter = (field, value) => {\r\n    setFilters((prev) => ({ ...prev, [field]: value }));\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const filteredRows = rows.filter((row) =>\r\n    Object.keys(filters).every((field) => {\r\n      const filterValue = filters[field]?.toLowerCase();\r\n      if (!filterValue) return true;\r\n      if (field === \"assigned_recruiters\") {\r\n        return (row[field] || []).some((u) => u.toLowerCase().includes(filterValue));\r\n      }\r\n      return String(row[field] ?? \"\").toLowerCase().includes(filterValue);\r\n    })\r\n  );\r\n\r\n  const sortedRows = [...filteredRows].sort((a, b) => {\r\n    if (!sortConfig.field) return 0;\r\n    // for arrays (assigned_recruiters) compare joined string\r\n    const getVal = (obj, f) =>\r\n      Array.isArray(obj[f]) ? (obj[f] || []).join(\", \") : obj[f] ?? \"\";\r\n    const valA = String(getVal(a, sortConfig.field)).toLowerCase();\r\n    const valB = String(getVal(b, sortConfig.field)).toLowerCase();\r\n    if (valA < valB) return sortConfig.direction === \"ascending\" ? -1 : 1;\r\n    if (valA > valB) return sortConfig.direction === \"ascending\" ? 1 : -1;\r\n    return 0;\r\n  });\r\n\r\n  // === Pagination ===\r\n  const totalPages = Math.ceil(sortedRows.length / rowsPerPage);\r\n  const paginatedRows = sortedRows.slice(\r\n    (currentPage - 1) * rowsPerPage,\r\n    currentPage * rowsPerPage\r\n  );\r\n\r\n  // === Column resize handlers ===\r\n  const startResize = (e, col) => {\r\n    e.preventDefault();\r\n    const startX = e.clientX;\r\n    const startWidth = thRefs.current[col]?.offsetWidth || 100;\r\n\r\n    const doDrag = (event) => {\r\n      const newWidth = Math.max(40, startWidth + event.clientX - startX);\r\n      setColWidths((prev) => ({ ...prev, [col]: newWidth }));\r\n    };\r\n\r\n    const stopDrag = () => {\r\n      document.removeEventListener(\"mousemove\", doDrag);\r\n      document.removeEventListener(\"mouseup\", stopDrag);\r\n    };\r\n\r\n    document.addEventListener(\"mousemove\", doDrag);\r\n    document.addEventListener(\"mouseup\", stopDrag);\r\n  };\r\n\r\n  // Helper: revert a field immediately in the UI (without saving)\r\n  const revertFieldImmediate = (row, field) => {\r\n    // clear any local editing for that row->field to show server value\r\n    setEditing((prev) => {\r\n      const copy = { ...prev };\r\n      if (!copy[row.requirementid]) return copy;\r\n      delete copy[row.requirementid][field];\r\n      // if no other fields left, remove the object\r\n      if (Object.keys(copy[row.requirementid] || {}).length === 0) delete copy[row.requirementid];\r\n      return copy;\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <div className=\"flex justify-center mb-4\">\r\n        <h2 className=\"font-bold text-lg\">Requirements List</h2>\r\n      </div>\r\n\r\n      {/* Filters row locked under headers and sized */}\r\n      <div className=\"table-wrapper\">\r\n        <div className=\"filters-row-outer\">\r\n          {columns\r\n            .filter((c) => c !== \"working\")\r\n            .map((col) => (\r\n              <div\r\n                key={col}\r\n                className=\"filter-cell\"\r\n                style={{ width: colWidths[col] || undefined }}\r\n              >\r\n                <input\r\n                  placeholder=\"Filter...\"\r\n                  className=\"filter-input\"\r\n                  value={filters[col] ?? \"\"}\r\n                  onChange={(e) => handleFilter(col, e.target.value)}\r\n                />\r\n              </div>\r\n            ))}\r\n          {/* a placeholder div for working col filter spacing */}\r\n          <div className=\"filter-cell\" style={{ width: colWidths.working || undefined }} />\r\n        </div>\r\n\r\n        <table className=\"w-full border-collapse border border-gray-400 text-sm\">\r\n          <thead className=\"bg-gray-100 sticky-header\">\r\n            <tr>\r\n              {columns.map((col) => (\r\n                <th\r\n                  key={col}\r\n                  ref={(el) => (thRefs.current[col] = el)}\r\n                  className=\"border p-1 cursor-pointer\"\r\n                  onClick={() => handleSort(col)}\r\n                  style={{ width: colWidths[col] }}\r\n                >\r\n                  <div className=\"th-content\">\r\n                    <span>\r\n                      {col === \"requirementid\" && \"Req ID\"}\r\n                      {col === \"title\" && \"Job Title\"}\r\n                      {col === \"client\" && \"Client\"}\r\n                      {col === \"slots\" && \"Slots\"}\r\n                      {col === \"status\" && \"Status\"}\r\n                      {col === \"assigned_recruiters\" && \"Assigned Recruiter(s)\"}\r\n                      {col === \"working\" && \"Working?\"}\r\n                    </span>\r\n                    {sortConfig.field === col && (\r\n                      <span>{sortConfig.direction === \"ascending\" ? \"▲\" : \"▼\"}</span>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"resize-handle\" onMouseDown={(e) => startResize(e, col)} />\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {paginatedRows.map((row) => {\r\n              const assignedUsers = row.assigned_recruiters || [];\r\n              const nonWorkable = isNonWorkable(row);\r\n              const editingUser = editingStatus[row.requirementid];\r\n\r\n              // helper to get displayed value (local editing overrides server)\r\n              const displayVal = (r, field) =>\r\n                editing[r]?.[field] !== undefined ? editing[r][field] : rows.find((x) => x.requirementid === row.requirementid)?.[field];\r\n\r\n              return (\r\n                <tr key={row.requirementid}>\r\n                  {/* Req ID */}\r\n                  <td className=\"border p-1 text-center\">\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"w-full text-center border rounded\"\r\n                      value={\r\n                        editing[row.requirementid]?.requirementid ?? row.requirementid ?? \"\"\r\n                      }\r\n                      onFocus={() =>\r\n                        socket.emit(\"editing_status\", {\r\n                          requirementid: row.requirementid,\r\n                          field: \"requirementid\",\r\n                          user: currentUser,\r\n                        })\r\n                      }\r\n                      onBlur={() => {\r\n                        socket.emit(\"editing_status\", {\r\n                          requirementid: row.requirementid,\r\n                          field: \"requirementid\",\r\n                          user: null,\r\n                        });\r\n                        handleSave(row.requirementid);\r\n                      }}\r\n                      onChange={(e) => handleEdit(row.requirementid, \"requirementid\", e.target.value)}\r\n                    />\r\n                    {editingUser?.field === \"requirementid\" && editingUser?.user !== currentUser && (\r\n                      <span className=\"text-xs text-blue-600\">{editingUser.user} is editing...</span>\r\n                    )}\r\n                  </td>\r\n\r\n                  {/* Job Title */}\r\n                  <td className=\"border p-1\">\r\n                    <input\r\n                      className=\"w-full\"\r\n                      value={editing[row.requirementid]?.title ?? row.title ?? \"\"}\r\n                      onFocus={() =>\r\n                        socket.emit(\"editing_status\", {\r\n                          requirementid: row.requirementid,\r\n                          field: \"title\",\r\n                          user: currentUser,\r\n                        })\r\n                      }\r\n                      onBlur={() => {\r\n                        socket.emit(\"editing_status\", {\r\n                          requirementid: row.requirementid,\r\n                          field: \"title\",\r\n                          user: null,\r\n                        });\r\n                        handleSave(row.requirementid);\r\n                      }}\r\n                      onChange={(e) => handleEdit(row.requirementid, \"title\", e.target.value)}\r\n                    />\r\n                    {editingUser?.field === \"title\" && editingUser?.user !== currentUser && (\r\n                      <span className=\"text-xs text-blue-600\">{editingUser.user} is editing...</span>\r\n                    )}\r\n                  </td>\r\n\r\n                  {/* Client */}\r\n                  <td className=\"border p-1\">\r\n                    <input\r\n                      className=\"w-full\"\r\n                      value={editing[row.requirementid]?.client ?? row.client ?? \"\"}\r\n                      onFocus={() =>\r\n                        socket.emit(\"editing_status\", {\r\n                          requirementid: row.requirementid,\r\n                          field: \"client\",\r\n                          user: currentUser,\r\n                        })\r\n                      }\r\n                      onBlur={() => {\r\n                        socket.emit(\"editing_status\", {\r\n                          requirementid: row.requirementid,\r\n                          field: \"client\",\r\n                          user: null,\r\n                        });\r\n                        handleSave(row.requirementid);\r\n                      }}\r\n                      onChange={(e) => handleEdit(row.requirementid, \"client\", e.target.value)}\r\n                    />\r\n                    {editingUser?.field === \"client\" && editingUser?.user !== currentUser && (\r\n                      <span className=\"text-xs text-blue-600\">{editingUser.user} is editing...</span>\r\n                    )}\r\n                  </td>\r\n\r\n                  {/* Slots (editable even when 0) */}\r\n                  <td className=\"border p-1 text-center\">\r\n                    <input\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      value={editing[row.requirementid]?.slots ?? row.slots ?? 0}\r\n                      onFocus={() =>\r\n                        socket.emit(\"editing_status\", {\r\n                          requirementid: row.requirementid,\r\n                          field: \"slots\",\r\n                          user: currentUser,\r\n                        })\r\n                      }\r\n                      onBlur={() => {\r\n                        socket.emit(\"editing_status\", {\r\n                          requirementid: row.requirementid,\r\n                          field: \"slots\",\r\n                          user: null,\r\n                        });\r\n                        handleSave(row.requirementid);\r\n                      }}\r\n                      onChange={(e) => {\r\n                        // if this user is assigned -> block and revert immediately (no loops)\r\n                        if (assignedUsers.includes(currentUser)) {\r\n                          // revert UI immediately to server value\r\n                          revertFieldImmediate(row, \"slots\");\r\n                          // inform user once\r\n                          alert(\"Cannot change Slots while working on this requirement.\");\r\n                          return;\r\n                        }\r\n                        // also prevent negative values\r\n                        const val = Number(e.target.value);\r\n                        handleEdit(row.requirementid, \"slots\", Number.isNaN(val) ? 0 : val);\r\n                      }}\r\n                      className=\"w-16 text-center\"\r\n                      style={{ width: colWidths.slots || undefined }}\r\n                    />\r\n                    {editingUser?.field === \"slots\" && editingUser?.user !== currentUser && (\r\n                      <span className=\"text-xs text-blue-600\">{editingUser.user} is editing...</span>\r\n                    )}\r\n                  </td>\r\n\r\n                  {/* Status */}\r\n                  <td className=\"border p-1 text-center\">\r\n                    <select\r\n                      value={editing[row.requirementid]?.status ?? row.status ?? \"\"}\r\n                      onFocus={() =>\r\n                        socket.emit(\"editing_status\", {\r\n                          requirementid: row.requirementid,\r\n                          field: \"status\",\r\n                          user: currentUser,\r\n                        })\r\n                      }\r\n                      onBlur={() => {\r\n                        socket.emit(\"editing_status\", {\r\n                          requirementid: row.requirementid,\r\n                          field: \"status\",\r\n                          user: null,\r\n                        });\r\n                        handleSave(row.requirementid);\r\n                      }}\r\n                      onChange={(e) => {\r\n                        if (assignedUsers.includes(currentUser)) {\r\n                          revertFieldImmediate(row, \"status\");\r\n                          alert(\"Cannot change Status while working on this requirement.\");\r\n                          return;\r\n                        }\r\n                        handleEdit(row.requirementid, \"status\", e.target.value);\r\n                      }}\r\n                      className=\"border p-1\"\r\n                      style={{ width: colWidths.status || undefined }}\r\n                    >\r\n                      <option>Open</option>\r\n                      <option>Closed</option>\r\n                      <option>Filled</option>\r\n                      <option>On Hold</option>\r\n                      <option>Cancelled</option>\r\n                    </select>\r\n                    {editingUser?.field === \"status\" && editingUser?.user !== currentUser && (\r\n                      <span className=\"text-xs text-blue-600\">{editingUser.user} is editing...</span>\r\n                    )}\r\n                  </td>\r\n\r\n                  {/* Assigned Recruiters */}\r\n                  <td className=\"border p-1 text-center\">\r\n                    {nonWorkable ? (\r\n                      \"Non-Workable\"\r\n                    ) : assignedUsers.length ? (\r\n                      <div className=\"flex flex-col items-start\">\r\n                        {assignedUsers.map((user) => {\r\n                          const time = row.working_times?.[user];\r\n                          const formattedTime = time\r\n                            ? new Date(time).toLocaleTimeString([], {\r\n                                hour: \"2-digit\",\r\n                                minute: \"2-digit\",\r\n                              })\r\n                            : null;\r\n                          return (\r\n                            <div key={user} className=\"flex gap-2 items-center text-xs\">\r\n                              <span className={user === currentUser ? \"font-semibold text-green-700\" : \"\"}>\r\n                                {user}\r\n                              </span>\r\n                              {formattedTime && <span className=\"text-gray-500\">({formattedTime})</span>}\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    ) : (\r\n                      \"-\"\r\n                    )}\r\n                  </td>\r\n\r\n                  {/* Working Checkbox */}\r\n                  <td className=\"border p-1 text-center\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={assignedUsers.includes(currentUser)}\r\n                      onChange={() => toggleWorking(row)}\r\n                      disabled={disableCheckbox(row)}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"flex justify-center gap-2 mt-2\">\r\n          <button disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)} className=\"border px-2 py-1 rounded disabled:opacity-50\">\r\n            Prev\r\n          </button>\r\n          {[...Array(totalPages)].map((_, i) => (\r\n            <button\r\n              key={i}\r\n              className={`border px-2 py-1 rounded ${currentPage === i + 1 ? \"bg-gray-300\" : \"\"}`}\r\n              onClick={() => setCurrentPage(i + 1)}\r\n            >\r\n              {i + 1}\r\n            </button>\r\n          ))}\r\n          <button disabled={currentPage === totalPages} onClick={() => setCurrentPage((p) => p + 1)} className=\"border px-2 py-1 rounded disabled:opacity-50\">\r\n            Next\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Table;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}